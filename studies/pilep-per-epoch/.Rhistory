pu_D <- read.csv("MyDataPileupHistogram_SingleMuon2016D_03Feb2017_v1.csv", header=T)
pu_D
pu_D$pu
sum(pu_D$pu)
pi_D$pu / sum(pu_D$pu)
pu_D$pu / sum(pu_D$pu)
head(pu_D)
add_norm_pu <-function(pu_df) {
pu_df$pu_norm     <- pu_df$pu     / sum(pu_df$pu)                                                                                     
pu_df$pu_err_norm <- pu_df$pu_err / sum(pu_df$pu)
}
add_norm_pu(pu_D)
head(pu_D)                                                                                                                            
add_norm_pu <-function(pu_df) {
pu_df$pu_norm     = pu_df$pu     / sum(pu_df$pu)                                                                                      
pu_df$pu_err_norm = pu_df$pu_err / sum(pu_df$pu)
}
add_norm_pu(pu_D)
head(pu_D)
pu_D$pu_norm     <- pu_D$pu     / sum(pu_D$pu)                                                                                        
pu_D$pu_norm_err <- pu_D$pu_err / sum(pu_D$pu)
head(pu_D)
q()
pu_B  <- read.csv("MyDataPileupHistogram_SingleMuon2016B_03Feb2017_ver2.csv", header=T)
pu_C  <- read.csv("MyDataPileupHistogram_SingleMuon2016C_03Feb2017_v1.csv",   header=T)
pu_D  <- read.csv("MyDataPileupHistogram_SingleMuon2016D_03Feb2017_v1.csv",   header=T)
pu_E  <- read.csv("MyDataPileupHistogram_SingleMuon2016E_03Feb2017_v1.csv",   header=T)
pu_F  <- read.csv("MyDataPileupHistogram_SingleMuon2016F_03Feb2017_v1.csv",   header=T)
pu_G  <- read.csv("MyDataPileupHistogram_SingleMuon2016G_03Feb2017_v1.csv",   header=T)
pu_H  <- read.csv("MyDataPileupHistogram_SingleMuon2016H_03Feb2017_ver2.csv", header=T)
pu_H3 <- read.csv("MyDataPileupHistogram_SingleMuon2016H_03Feb2017_ver3.csv", header=T)
pu_B$pu_norm     <- pu_B$pu     / sum(pu_B$pu)
pu_B$pu_norm_err <- pu_B$pu_err / sum(pu_B$pu)
pu_C$pu_norm     <- pu_C$pu     / sum(pu_C$pu)
pu_C$pu_norm_err <- pu_C$pu_err / sum(pu_C$pu)
pu_D$pu_norm     <- pu_D$pu     / sum(pu_D$pu)
pu_D$pu_norm_err <- pu_D$pu_err / sum(pu_D$pu)
pu_E$pu_norm     <- pu_E$pu     / sum(pu_E$pu)
pu_E$pu_norm_err <- pu_E$pu_err / sum(pu_E$pu)
pu_F$pu_norm     <- pu_F$pu     / sum(pu_F$pu)
pu_F$pu_norm_err <- pu_F$pu_err / sum(pu_F$pu)
pu_G$pu_norm     <- pu_G$pu     / sum(pu_G$pu)
pu_G$pu_norm_err <- pu_G$pu_err / sum(pu_G$pu)
pu_H$pu_norm     <- pu_H$pu     / sum(pu_H$pu)
pu_H$pu_norm_err <- pu_H$pu_err / sum(pu_H$pu)
pu_H3$pu_norm     <- pu_H3$pu     / sum(pu_H3$pu)
pu_H3$pu_norm_err <- pu_H3$pu_err / sum(pu_H3$pu)
                                                                                                                                      
library(ggplot2)
pu_B  <- read.csv("MyDataPileupHistogram_SingleMuon2016B_03Feb2017_ver2.csv", header=T)
pu_C  <- read.csv("MyDataPileupHistogram_SingleMuon2016C_03Feb2017_v1.csv",   header=T)
pu_D  <- read.csv("MyDataPileupHistogram_SingleMuon2016D_03Feb2017_v1.csv",   header=T)
pu_E  <- read.csv("MyDataPileupHistogram_SingleMuon2016E_03Feb2017_v1.csv",   header=T)
pu_F  <- read.csv("MyDataPileupHistogram_SingleMuon2016F_03Feb2017_v1.csv",   header=T)
pu_G  <- read.csv("MyDataPileupHistogram_SingleMuon2016G_03Feb2017_v1.csv",   header=T)
pu_H  <- read.csv("MyDataPileupHistogram_SingleMuon2016H_03Feb2017_ver2.csv", header=T)
pu_H3 <- read.csv("MyDataPileupHistogram_SingleMuon2016H_03Feb2017_ver3.csv", header=T)
pu_BCDEF <- pu_B + pu_C + pu_D + pu_E + pu_F
pu_GH    <- pu_G + pu_H + pu_H3
pu_B$pu_norm     <- pu_B$pu     / sum(pu_B$pu)
pu_B$pu_norm_err <- pu_B$pu_err / sum(pu_B$pu)
pu_C$pu_norm     <- pu_C$pu     / sum(pu_C$pu)
pu_C$pu_norm_err <- pu_C$pu_err / sum(pu_C$pu)
pu_D$pu_norm     <- pu_D$pu     / sum(pu_D$pu)
pu_D$pu_norm_err <- pu_D$pu_err / sum(pu_D$pu)
pu_E$pu_norm     <- pu_E$pu     / sum(pu_E$pu)
pu_E$pu_norm_err <- pu_E$pu_err / sum(pu_E$pu)
pu_F$pu_norm     <- pu_F$pu     / sum(pu_F$pu)
pu_F$pu_norm_err <- pu_F$pu_err / sum(pu_F$pu)
pu_G$pu_norm     <- pu_G$pu     / sum(pu_G$pu)
pu_G$pu_norm_err <- pu_G$pu_err / sum(pu_G$pu)
pu_H$pu_norm     <- pu_H$pu     / sum(pu_H$pu)
pu_H$pu_norm_err <- pu_H$pu_err / sum(pu_H$pu)
pu_H3$pu_norm     <- pu_H3$pu     / sum(pu_H3$pu)
pu_H3$pu_norm_err <- pu_H3$pu_err / sum(pu_H3$pu)
pu_BCDEF$pu_norm     <- pu_BCDEF$pu     / sum(pu_BCDEF$pu)
pu_BCDEF$pu_norm_err <- pu_BCDEF$pu_err / sum(pu_BCDEF$pu)                                                                            
pu_GH$pu_norm     <- pu_GH$pu     / sum(pu_GH$pu)
pu_GH$pu_norm_err <- pu_GH$pu_err / sum(pu_GH$pu)
head(pu_GH)
ggplot(pu_BCDEF, aes(bin_n, pu_norm)) + geom_point(data=pu_GH)                                                                        
ggplot(pu_BCDEF, aes(bin_n, pu_norm)) + geom_point(data=pu_GH, mapping=aes(x=bin_n, y=pu_norm), color="red")                          
ggplot(pu_BCDEF, aes(bin_n, pu_norm)) + geom_point() + geom_point(data=pu_GH, mapping=aes(x=bin_n, y=pu_norm), color="red")           
sum(pu_BCDEF$pu_norm)
sum(pu_GH$pu_norm)
q()
old_pu_data_mc_ratio <- read.csv("pileup_norm_values_data_mc_8-8-2016.csv", header=T)                                                 
head(old_pu_data_mc_ratio)
ggplot(old_pu_data_mc_ratio, aes(x=1:nrow(old_pu_data_mc_ratio), norm_value_ratio)) + geom_point()                                    
library(ggplot)
ggplot(old_pu_data_mc_ratio, aes(x=1:nrow(old_pu_data_mc_ratio), norm_value_ratio)) + geom_point()                                    
library(ggplot2)                                                                                                                      
ggplot(old_pu_data_mc_ratio, aes(x=1:nrow(old_pu_data_mc_ratio), norm_value_ratio)) + geom_point()
q()
main_ratio_now = c(0.360609416811339, 0.910848525427002, 1.20629960507795, 0.965997726573782, 1.10708082813183, 1.14843491548622, 0.786526251164482, 0.490577792661333, 0.740680941110478,
0.884048630953726,
0.964813189764159, 1.07045369167689, 1.12497267309738, 1.17367530613108, 1.20239808206413, 1.20815108390021, 1.20049333094509, 1.18284686347315, 1.14408796655615,
1.0962284704313, 1.06549162803223, 1.05151011089581, 1.05159666626121, 1.05064452078328, 1.0491726301522, 1.05772537082991, 1.07279673875566, 1.0837536468865, 1.09536667397119,
1.10934472980173, 1.09375894592864, 1.08263679568271, 1.04289345879947, 0.9851490341672, 0.909983816540809, 0.821346330143864, 0.71704523475871, 0.609800913869359, 0.502935245638477,
0.405579825620816, 0.309696044611377, 0.228191137503131, 0.163380359253309, 0.113368437957202, 0.0772279997453792, 0.0508111733313502, 0.0319007262683943, 0.0200879459309245, 0.0122753366005436,
0.00739933885813127, 0.00437426967257811, 0.00260473545284139, 0.00157047254226743, 0.000969500595715493, 0.000733193118123283, 0.000669817107713128, 0.000728548958604492, 0.000934559691182011, 0.00133719688378802,
0.00186652283903214, 0.00314422244976771, 0.00406954793369611, 0.00467888840511915, 0.00505224284441512, 0.00562827194936864, 0.0055889504870752, 0.00522867039470319, 0.00450752163476433, 0.00395300774604375,
0.00330577167682956, 0.00308353042577215, 0.00277846504893301, 0.00223943190687725, 0.00196650068765464, 0.00184742734258922,)
main_ratio_now = c(0.360609416811339, 0.910848525427002, 1.20629960507795, 0.965997726573782, 1.10708082813183, 1.14843491548622, 0.786526251164482, 0.490577792661333, 0.740680941110478,
0.884048630953726,
0.964813189764159, 1.07045369167689, 1.12497267309738, 1.17367530613108, 1.20239808206413, 1.20815108390021, 1.20049333094509, 1.18284686347315, 1.14408796655615,
1.0962284704313, 1.06549162803223, 1.05151011089581, 1.05159666626121, 1.05064452078328, 1.0491726301522, 1.05772537082991, 1.07279673875566, 1.0837536468865, 1.09536667397119,
1.10934472980173, 1.09375894592864, 1.08263679568271, 1.04289345879947, 0.9851490341672, 0.909983816540809, 0.821346330143864, 0.71704523475871, 0.609800913869359, 0.502935245638477,
0.405579825620816, 0.309696044611377, 0.228191137503131, 0.163380359253309, 0.113368437957202, 0.0772279997453792, 0.0508111733313502, 0.0319007262683943, 0.0200879459309245, 0.0122753366005436,
0.00739933885813127, 0.00437426967257811, 0.00260473545284139, 0.00157047254226743, 0.000969500595715493, 0.000733193118123283, 0.000669817107713128, 0.000728548958604492, 0.000934559691182011, 0.00133719688378802,
0.00186652283903214, 0.00314422244976771, 0.00406954793369611, 0.00467888840511915, 0.00505224284441512, 0.00562827194936864, 0.0055889504870752, 0.00522867039470319, 0.00450752163476433, 0.00395300774604375,
0.00330577167682956, 0.00308353042577215, 0.00277846504893301, 0.00223943190687725, 0.00196650068765464, 0.00184742734258922)         
length(main_ratio_now)
ggplot(old_pu_data_mc_ratio, aes(x=1:nrow(old_pu_data_mc_ratio), norm_value_ratio)) + geom_point() +
  geom_point(mapping=aes(x=1:length(main_ratio_now), y=main_ratio_now), color="red")                                                  
library(ggplot2)
ggplot(old_pu_data_mc_ratio, aes(x=1:nrow(old_pu_data_mc_ratio), norm_value_ratio)) + geom_point() +
  geom_point(mapping=aes(x=1:length(main_ratio_now), y=main_ratio_now), color="red")                                                  
main_ratio_now_df = data.frame(nvtx=1:length(main_ratio_now), norm_value_ratio=main_ratio_now)                                        
ggplot(old_pu_data_mc_ratio, aes(x=1:nrow(old_pu_data_mc_ratio), norm_value_ratio)) + geom_point() +
  geom_point(data=main_ratio_now_df, mapping=aes(x=nvtx, y=norm_value_ratio), color="red")                                            
head(old_pu_data_mc_ratio)
q()
main_pu_data_now <- read.csv("used_pileup_data/data-pu-69-2-up-down-N-MC-Summer16-normalized-averages.csv", header=T)
head(main_pu_data_now)
main_pu_data_now$pileup_normalized_average
head(pu_BCDEF)
pu_BCDEF$pu
length(pu_BCDEF$pu)
length(main_pu_data_now$pileup_normalized_average)
length(main_pu_data_now$pileup_normalized_average[1:100])
head(main_pu_data_now)
pu_per_epoch_nominal <- data.frame(
    nbin=main_pu_data_now$nbin[1:100],
    pu_mc=main_pu_data_now$pileup_normalized_average[1:100],
    pu_BCDEF_nom = pu_BCDEF$pu,
    pu_GH_nom    = pu_GH$pu)
pu_per_epoch_nominal
sum(pu_per_epoch_nominal$pu_mc)
sum(pu_per_epoch_nominal$pu_BCDEF_nom)
sum(pu_per_epoch_nominal$pu_GH_nom)
pu_per_epoch_nominal <- data.frame(
    nbin=main_pu_data_now$nbin[1:100],
    pu_mc=main_pu_data_now$pileup_normalized_average[1:100],
    pu_BCDEF_nom = pu_BCDEF$pu_norm,
    pu_GH_nom    = pu_GH$pu_norm)                                                                          
sum(pu_per_epoch_nominal$pu_mc)
sum(pu_per_epoch_nominal$pu_BCDEF_nom)
sum(pu_per_epoch_nominal$pu_GH_nom)
pu_per_epoch_nominal$ratio_BCDEF <- pu_per_epoch_nominal$pu_BCDEF_nom / pu_per_epoch_nominal$pu_mc
pu_per_epoch_nominal$ratio_GH    <- pu_per_epoch_nominal$pu_GH_nom    / pu_per_epoch_nominal$pu_mc
pu_per_epoch_nominal
ggplot(pu_per_epoch_nominal, aes(nbin, ratio_BCDEF)) + geom_point() + geom_point(mapping=aes(y=ratio_GH), color="red")                                                                                                
library(ggplot2)
ggplot(pu_per_epoch_nominal, aes(nbin, ratio_BCDEF)) + geom_point() + geom_point(mapping=aes(y=ratio_GH), color="red")
q()
calculated_pu_weights <-read.csv("calculated_per_epoch_pu.csv", header=T)                                  
pu_per_epoch_nominal
library(ggplot2)
ggplot(pu_per_epoch_nominal, aes(nbin, ratio_BCDEF)) + geom_point() +
    geom_point(mapping=aes(y=ratio_GH), color="red") +
    geom_point(data=calculated_pu_weights, mapping=aes(x=nbin, y=weight_pu_bcdef), color="green") +
    geom_point(data=calculated_pu_weights, mapping=aes(x=nbin, y=weight_pu_gh), color="blue")
calculated_pu_weights
calculated_pu_weights <-read.csv("calculated_per_epoch_pu.csv", header=T)
calculated_pu_weights
ggplot(pu_per_epoch_nominal, aes(nbin, ratio_BCDEF)) + geom_point() +
    geom_point(mapping=aes(y=ratio_GH), color="red") +
    geom_point(data=calculated_pu_weights, mapping=aes(x=nbin, y=weight_pu_bcdef), color="green") +
    geom_point(data=calculated_pu_weights, mapping=aes(x=nbin, y=weight_pu_gh), color="blue")
ggsave("different_pu_weights_black-B_red-H_green-B-calculated_blue-H-calculated.png")
q()
