
python distr_ratios.py mc_v25p2_v26p2.root -c ctr_old_el_sel:Mt_lep_met_f -p tt_lj --ratio-channel-distrs ctr_old_el_sel:Mt_lep_met_t2,ctr_old_el_sel:Mt_lep_met_t3,ctr_old_el_sel:Mt_lep_met_t4,ctr_old_el_sel:Mt_lep_met_t5,ctr_old_el_sel:Mt_lep_met_t6 --title "" --title-x "M_{T}(e, MET)"

python distr_ratios.py mc_v25p2_v26p2.root -c ctr_old_el_sel:Mt_lep_met_f -p tt_eltau --ratio-channel-distrs ctr_old_el_sel:Mt_lep_met_t2,ctr_old_el_sel:Mt_lep_met_t3,ctr_old_el_sel:Mt_lep_met_t4,ctr_old_el_sel:Mt_lep_met_t5,ctr_old_el_sel:Mt_lep_met_t6 --title "" --title-x "M_{T}(e, MET)"



python distr_ratios.py mc_v25p2_v26p2.root -c ctr_old_mu_sel:Mt_lep_met_f -p tt_lj --ratio-channel-distrs ctr_old_mu_sel:Mt_lep_met_t2,ctr_old_mu_sel:Mt_lep_met_t3,ctr_old_mu_sel:Mt_lep_met_t4,ctr_old_mu_sel:Mt_lep_met_t5,ctr_old_mu_sel:Mt_lep_met_t6 --title "" --title-x "M_{T}(#mu, MET)"

python distr_ratios.py mc_v25p2_v26p2.root -c ctr_old_mu_sel:Mt_lep_met_f -p tt_mutau --ratio-channel-distrs ctr_old_mu_sel:Mt_lep_met_t2,ctr_old_mu_sel:Mt_lep_met_t3,ctr_old_mu_sel:Mt_lep_met_t4,ctr_old_mu_sel:Mt_lep_met_t5,ctr_old_mu_sel:Mt_lep_met_t6 --title "" --title-x "M_{T}(#mu, MET)"
















weights:
weight         0.95
pu             1.05
bSF            0.97
record_weight  0.96


syst_weights_nominal = [weight, weight_pu, 1., 1.]
weight, weight_PU, weight_top_pt, weight_th = syst_weights_nominal
nom_sys_weight       = weight * weight_th * weight_PU * weight_top_pt
record_weight        = nom_sys_weight * weight_bSF



before that:

weight = 1.
weight *= el_trg_sf[0] * el_sfs_reco[0] * el_sfs_id[0]

weight control histos for el SFs:
trk  0.988
id   0.981
trg  0.97713
0.988 * 0.981 * 0.977 = 0.9469
all  0.948

-- matches



-- How do you treat using both the inclusive W+jets sample as well as the dedicated W+1-4jets samples?

In the presented version of AN the dedicated samples are just added to the inclusive sample. For lumi normalization the cross-section of inclusive sample is reduced by the sum of N-jet cross-sections.
Previously a stitching procedure over generator level "number of particles parameter" NUP was used. But due to couple issues it was turned off.
And since the contribution of WJets is small in final selection (5%), the stitching was not applied for time being.
Now different approaches to WJets have been well reviewed with the conclusion to return to using the stitching procedure with WNJets, it provides enough statistics and good modeling of Mt and other distributions.



Also the aMCatNLO WJets was considered. The dataset performed well at preselection but lacked statistics for final selection (the extended dataset of aMCatNLO was not included at that time).
Now the stitching and overall behavior of WJets MC has being reviewed with the following results.

In wjets control region and in preselection three versions of WJets models are considered: 1) inclusive Madgraph WJets, 2) Madgraph WNJets with the inclusive dataset added as W0Jets with required cut on NUP parameter, 3) the inclusive aMCatNLO dataset.
And all extended datasets are included for these MC.
The QCD and all other processes are taken from MC.
The events in W0Jets sample are required to have NUP different from the values in WNJets. Which means NUP < 6 (W1Jets has NUP = 6, W2Jets NUP = 7 etc).
Standard cross-sections (reported in table 1) are used for inclusive Madgraph and aMCatNLO, in case on NJets the cross section of W0Jets = inclusive - sum(WNJets).

For each of WJets I test different normalization factors, trying to match MC to Data at high values of lepton pt, met and Mt -- i.e. the kinematic regions without QCD.
First of all the shapes of all distributions in all 3 models of WJets mostly agree. *TODO add comparative plots of WJets shape.*
The WNJets is a bit closer to aMCatNLO than just the inclusive Madgraph. However inclusive Madgraph is not significantly different.
Then, the normalization shows close agreement with the value of NLO cross section used for aMCatNLO 61.500 fb:
the aMCatNLO WJets get the normalization factor of 0.96,
inclusive Madgraph gets 1.25 which brings it close to aMCatNLO 50.6 * 1.24 = 62.9 fb.
*Add plots of the distributions with the normalization factors as text labels on them. And add event yield tables.*
And also it is useful to notice that the MC QCD matches the data well in these regions when it is multiplied by a factor about of two (more precisely 1.75).
*Plots with normalized QCD.*
(This factor also shows up in study of QCD modeling.)

The stithced Madgraph WNJets resemble aMCatNLO well and have good statistics in some regions of data. But in our main selection they end up lacking statistics.
*The W0Jets pass the selection? -- add numbers on that. And final decision to switch to aMCatNLO or just inclusive Madgraph, depending on statistics.*






((TTree*) ntupler->Get("reduced_ttree"))->Scan("gen_final_pdgId[ 0]:gen_final_PromptFinal[ 0]:gen_final_chainId[ 0]", "", "", 1)
((TTree*) ntupler->Get("reduced_ttree"))->Scan("gen_final_pdgId[ 1]:gen_final_PromptFinal[ 1]:gen_final_chainId[ 1]", "", "", 1)
((TTree*) ntupler->Get("reduced_ttree"))->Scan("gen_final_pdgId[ 2]:gen_final_PromptFinal[ 2]:gen_final_chainId[ 2]", "", "", 1)
((TTree*) ntupler->Get("reduced_ttree"))->Scan("gen_final_pdgId[ 3]:gen_final_PromptFinal[ 3]:gen_final_chainId[ 3]", "", "", 1)
((TTree*) ntupler->Get("reduced_ttree"))->Scan("gen_final_pdgId[ 4]:gen_final_PromptFinal[ 4]:gen_final_chainId[ 4]", "", "", 1)
((TTree*) ntupler->Get("reduced_ttree"))->Scan("gen_final_pdgId[ 5]:gen_final_PromptFinal[ 5]:gen_final_chainId[ 5]", "", "", 1)
((TTree*) ntupler->Get("reduced_ttree"))->Scan("gen_final_pdgId[ 6]:gen_final_PromptFinal[ 6]:gen_final_chainId[ 6]", "", "", 1)
((TTree*) ntupler->Get("reduced_ttree"))->Scan("gen_final_pdgId[ 7]:gen_final_PromptFinal[ 7]:gen_final_chainId[ 7]", "", "", 1)


((TTree*) ntupler->Get("reduced_ttree"))->Scan("gen_final_pdgId[ 8]:gen_final_PromptFinal[ 8]:gen_final_chainId[ 8]", "", "", 1)
((TTree*) ntupler->Get("reduced_ttree"))->Scan("gen_final_pdgId[ 9]:gen_final_PromptFinal[ 9]:gen_final_chainId[ 9]", "", "", 1)
((TTree*) ntupler->Get("reduced_ttree"))->Scan("gen_final_pdgId[10]:gen_final_PromptFinal[10]:gen_final_chainId[10]", "", "", 1)
((TTree*) ntupler->Get("reduced_ttree"))->Scan("gen_final_pdgId[11]:gen_final_PromptFinal[11]:gen_final_chainId[11]", "", "", 1)
((TTree*) ntupler->Get("reduced_ttree"))->Scan("gen_final_pdgId[12]:gen_final_PromptFinal[12]:gen_final_chainId[12]", "", "", 1)



((TTree*) ntupler->Get("reduced_ttree"))->Scan("gen_final_pdgId[0]:gen_final_PromptFinal[0]:gen_final_PromptDecayed[0]:gen_final_fromHardFinal[0]:gen_final_PromptTauDecay[0]:gen_final_chainId[0]", "", "", 1)
((TTree*) ntupler->Get("reduced_ttree"))->Scan("gen_final_pdgId[1]:gen_final_PromptFinal[1]:gen_final_PromptDecayed[1]:gen_final_fromHardFinal[1]:gen_final_PromptTauDecay[1]:gen_final_chainId[1]", "", "", 1)
((TTree*) ntupler->Get("reduced_ttree"))->Scan("gen_final_pdgId[2]:gen_final_PromptFinal[2]:gen_final_PromptDecayed[2]:gen_final_fromHardFinal[2]:gen_final_PromptTauDecay[2]:gen_final_chainId[2]", "", "", 1)
((TTree*) ntupler->Get("reduced_ttree"))->Scan("gen_final_pdgId[3]:gen_final_PromptFinal[3]:gen_final_PromptDecayed[3]:gen_final_fromHardFinal[3]:gen_final_PromptTauDecay[3]:gen_final_chainId[3]", "", "", 1)
((TTree*) ntupler->Get("reduced_ttree"))->Scan("gen_final_pdgId[4]:gen_final_PromptFinal[4]:gen_final_PromptDecayed[4]:gen_final_fromHardFinal[4]:gen_final_PromptTauDecay[4]:gen_final_chainId[4]", "", "", 1)
((TTree*) ntupler->Get("reduced_ttree"))->Scan("gen_final_pdgId[5]:gen_final_PromptFinal[5]:gen_final_PromptDecayed[5]:gen_final_fromHardFinal[5]:gen_final_PromptTauDecay[5]:gen_final_chainId[5]", "", "", 1)
((TTree*) ntupler->Get("reduced_ttree"))->Scan("gen_final_pdgId[6]:gen_final_PromptFinal[6]:gen_final_PromptDecayed[6]:gen_final_fromHardFinal[6]:gen_final_PromptTauDecay[6]:gen_final_chainId[6]", "", "", 1)
((TTree*) ntupler->Get("reduced_ttree"))->Scan("gen_final_pdgId[7]:gen_final_PromptFinal[7]:gen_final_PromptDecayed[7]:gen_final_fromHardFinal[7]:gen_final_PromptTauDecay[7]:gen_final_chainId[7]", "", "", 1)



((TTree*) ntupler->Get("reduced_ttree"))->Scan("gen_PromptDecayed_pdgId[ 0]:gen_PromptDecayed_status[ 0]:gen_PromptDecayed_ndaughters[ 0]:gen_PromptDecayed_chainId[ 0]", "", "", 1)
((TTree*) ntupler->Get("reduced_ttree"))->Scan("gen_PromptDecayed_pdgId[ 1]:gen_PromptDecayed_status[ 1]:gen_PromptDecayed_ndaughters[ 1]:gen_PromptDecayed_chainId[ 1]", "", "", 1)
((TTree*) ntupler->Get("reduced_ttree"))->Scan("gen_PromptDecayed_pdgId[ 2]:gen_PromptDecayed_status[ 2]:gen_PromptDecayed_ndaughters[ 2]:gen_PromptDecayed_chainId[ 2]", "", "", 1)
((TTree*) ntupler->Get("reduced_ttree"))->Scan("gen_PromptDecayed_pdgId[ 3]:gen_PromptDecayed_status[ 3]:gen_PromptDecayed_ndaughters[ 3]:gen_PromptDecayed_chainId[ 3]", "", "", 1)
((TTree*) ntupler->Get("reduced_ttree"))->Scan("gen_PromptDecayed_pdgId[ 4]:gen_PromptDecayed_status[ 4]:gen_PromptDecayed_ndaughters[ 4]:gen_PromptDecayed_chainId[ 4]", "", "", 1)
((TTree*) ntupler->Get("reduced_ttree"))->Scan("gen_PromptDecayed_pdgId[ 5]:gen_PromptDecayed_status[ 5]:gen_PromptDecayed_ndaughters[ 5]:gen_PromptDecayed_chainId[ 5]", "", "", 1)
((TTree*) ntupler->Get("reduced_ttree"))->Scan("gen_PromptDecayed_pdgId[ 6]:gen_PromptDecayed_status[ 6]:gen_PromptDecayed_ndaughters[ 6]:gen_PromptDecayed_chainId[ 6]", "", "", 1)
((TTree*) ntupler->Get("reduced_ttree"))->Scan("gen_PromptDecayed_pdgId[ 7]:gen_PromptDecayed_status[ 7]:gen_PromptDecayed_ndaughters[ 7]:gen_PromptDecayed_chainId[ 7]", "", "", 1)




((TTree*) ntupler->Get("reduced_ttree"))->Scan("gen_t_b_final_pdgIds[ 0]", "", "", 1)
((TTree*) ntupler->Get("reduced_ttree"))->Scan("gen_t_b_final_pdgIds[ 1]", "", "", 1)
((TTree*) ntupler->Get("reduced_ttree"))->Scan("gen_t_b_final_pdgIds[ 2]", "", "", 1)
((TTree*) ntupler->Get("reduced_ttree"))->Scan("gen_t_b_final_pdgIds[ 3]", "", "", 1)
((TTree*) ntupler->Get("reduced_ttree"))->Scan("gen_t_b_final_pdgIds[ 4]", "", "", 1)

((TTree*) ntupler->Get("reduced_ttree"))->Scan("gen_tb_b_final_pdgIds[ 0]", "", "", 1)
((TTree*) ntupler->Get("reduced_ttree"))->Scan("gen_tb_b_final_pdgIds[ 1]", "", "", 1)
((TTree*) ntupler->Get("reduced_ttree"))->Scan("gen_tb_b_final_pdgIds[ 2]", "", "", 1)
((TTree*) ntupler->Get("reduced_ttree"))->Scan("gen_tb_b_final_pdgIds[ 3]", "", "", 1)
((TTree*) ntupler->Get("reduced_ttree"))->Scan("gen_tb_b_final_pdgIds[ 4]", "", "", 1)

((TTree*) ntupler->Get("reduced_ttree"))->Scan("gen_t_w1_final_pdgIds[ 0]", "", "", 1)
((TTree*) ntupler->Get("reduced_ttree"))->Scan("gen_t_w1_final_pdgIds[ 1]", "", "", 1)
((TTree*) ntupler->Get("reduced_ttree"))->Scan("gen_t_w1_final_pdgIds[ 2]", "", "", 1)
((TTree*) ntupler->Get("reduced_ttree"))->Scan("gen_t_w1_final_pdgIds[ 3]", "", "", 1)
((TTree*) ntupler->Get("reduced_ttree"))->Scan("gen_t_w1_final_pdgIds[ 4]", "", "", 1)

((TTree*) ntupler->Get("reduced_ttree"))->Scan("gen_t_w2_final_pdgIds[ 0]", "", "", 1)
((TTree*) ntupler->Get("reduced_ttree"))->Scan("gen_t_w2_final_pdgIds[ 1]", "", "", 1)
((TTree*) ntupler->Get("reduced_ttree"))->Scan("gen_t_w2_final_pdgIds[ 2]", "", "", 1)
((TTree*) ntupler->Get("reduced_ttree"))->Scan("gen_t_w2_final_pdgIds[ 3]", "", "", 1)
((TTree*) ntupler->Get("reduced_ttree"))->Scan("gen_t_w2_final_pdgIds[ 4]", "", "", 1)

((TTree*) ntupler->Get("reduced_ttree"))->Scan("gen_tb_w1_final_pdgIds[ 0]", "", "", 1)
((TTree*) ntupler->Get("reduced_ttree"))->Scan("gen_tb_w1_final_pdgIds[ 1]", "", "", 1)

((TTree*) ntupler->Get("reduced_ttree"))->Scan("gen_tb_w2_final_pdgIds[ 0]", "", "", 1)
((TTree*) ntupler->Get("reduced_ttree"))->Scan("gen_tb_w2_final_pdgIds[ 1]", "", "", 1)

gen_t_b_final_pdgIds






mutau_l0->Divide(mutau_all)
mutau_l1->Divide(mutau_all)
mutau_l2->Divide(mutau_all)
mutau_l3->Divide(mutau_all)
mutau_l4->Divide(mutau_all)

mutau_l1->SetLineColor(kRed + 0)
mutau_l2->SetLineColor(kRed + 1)
mutau_l3->SetLineColor(kRed + 2)
mutau_l4->SetLineColor(kRed + 3)

mutau_l0->Draw()
mutau_l1->Draw("same")
mutau_l2->Draw("same")
mutau_l3->Draw("same")
mutau_l4->Draw("same")


TLegend* leg = new TLegend(0.7,0.7,1,1)
leg->AddEntry(mutau_l0, "vloose/all", "L")
leg->AddEntry(mutau_l1, "loose/all", "L")
leg->AddEntry(mutau_l2, "medium/all", "L")
leg->AddEntry(mutau_l3, "tight/all", "L")
leg->AddEntry(mutau_l4, "vtight/all", "L")

leg->Draw("same")





python stack_postfit.py fitDiagnosticsElShapesPostFitDistr.root ctr_old_el_sel_ljout --title-x "Mt(lep, MET)"

# crab submition

for d in `cat dsets_feb_rereco`
python make_crab_cfgs.py $d v13-0 Dilep_tauID

for d in `cat dsets_ext_wjets_dyjets `
python make_crab_cfgs.py $d v13-0 Dilep_tauID

for c in `ls python/crab_cfgs/v13-0/*crab.py`
crab submit -c $c

for c in `cat new_sub`
do
crab submit -c $c
done

for c in `cat dsets_feb_rereco`
do
python make_crab_cfgs.py $c v13-1 Dilep_tauID
done

for c in `ls python/crab_cfgs/v13-1/*crab.py`
crab submit -c $c


## resubmit

--force for resubmit finished jobs

for j in `cat fresh_crabs`
do
crab resubmit --force -d $j
done



## status

for c in `ls crab_projects/crab_Ntupler_v13-0_* -d`
do
  crab status -d $c
done







# track info in TrackMatch TTree

((TTree*) tauMatch->Get("tauMatch_ttree"))->Scan("tau_IDlev[0]:tau_p4[0].E(): tau_flightLength[0]: tau_SV_dist[0]: tau_SV_fit_track_OS_matched_gen_dR[tau_refited_index[0]]:tau_SV_fit_track_SS1_matched_gen_dR[tau_refited_index[0]]:tau_SV_fit_track_SS2_matched_gen_dR[tau_refited_index[0]]: tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]]:tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]]:tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]]: track_b[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]]:track_b[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]]:track_b[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]]: track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta():track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta():track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(): track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi():track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi():track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi(): track_vertex_key[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]]:track_vertex_key[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]]:track_vertex_key[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]]: track_vertex_association[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]]:track_vertex_association[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]]:track_vertex_association[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]] ", "tau_IDlev[0]>1 && gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1", "")

# only track b
((TTree*) tauMatch->Get("tauMatch_ttree"))->Scan("tau_IDlev[0]:tau_p4[0].E(): tau_flightLength[0]: tau_SV_dist[0]: tau_SV_fit_track_OS_matched_gen_dR[tau_refited_index[0]]:tau_SV_fit_track_SS1_matched_gen_dR[tau_refited_index[0]]:tau_SV_fit_track_SS2_matched_gen_dR[tau_refited_index[0]]: tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]]:tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]]:tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]]: track_b[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]]:track_b[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]]:track_b[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]] ", "tau_IDlev[0]>1 && gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1", "")


# sum of b angles check

((TTree*) tauMatch->Get("tauMatch_ttree"))->Scan(" tau_flightLength[0]: tau_SV_dist[0]: tau_SV_fit_track_OS_matched_gen_dR[tau_refited_index[0]]:tau_SV_fit_track_SS1_matched_gen_dR[tau_refited_index[0]]:tau_SV_fit_track_SS2_matched_gen_dR[tau_refited_index[0]]: tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]]:tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]]:tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]]: track_b[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]]:track_b[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]]:track_b[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]]: b_anglesum(track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]]) ", "tau_IDlev[0]>1 && gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1", "")

((TTree*) tauMatch->Get("tauMatch_ttree"))->Scan(" tau_flightLength[0]: tau_SV_dist[0]: tau_gen_dR[0]: b_anglesum(track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]]) ", "tau_IDlev[0]>1 && gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1", "")

((TTree*) tauMatch->Get("tauMatch_ttree"))->Scan(" tau_flightLength[0]: tau_SV_dist[0]: tau_gen_dR[0]: b_anglesum(track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]]) ", "tau_IDlev[0]>1 && gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1", "")

((TTree*) tauMatch->Get("tauMatch_ttree"))->Scan(" tau_flightLength[0]: tau_SV_dist[0]: tau_gen_dR[0]: b_anglesum(track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]]): v_angle( track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(),track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi()): v_angle( track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(),track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi()): v_angle( track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(),track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(),track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi()) ", "tau_IDlev[0]>1 && gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1", "")

# b angles VS track angles
# with ref vtx key

((TTree*) tauMatch->Get("tauMatch_ttree"))->Scan(" tau_flightLength[0]: tau_SV_dist[0]: tau_gen_dR[0]: track_vertex_key[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]]:track_vertex_key[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]]:track_vertex_key[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]]: b_angle(track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]]): b_angle(track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]]): b_angle(track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]]): v_angle( track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(),track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi()): v_angle( track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(),track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi()): v_angle( track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(),track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(),track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi()) ", "tau_IDlev[0]>1 && gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1", "")

# b product track
# is b perpendicular to track?

b_prod_track

((TTree*) tauMatch->Get("tauMatch_ttree"))->Scan(" tau_flightLength[0]: tau_SV_dist[0]: tau_gen_dR[0]: b_angle_track( track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi()) : b_angle_track( track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi()) : b_angle_track( track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi()) ", "tau_IDlev[0]>1 && gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1", "")

# b SV

double b_SV(
	Float_t b1x, Float_t b1y, Float_t b1z,
	Float_t b2x, Float_t b2y, Float_t b2z,
	Float_t v1eta, Float_t v1phi,
	Float_t v2eta, Float_t v2phi
	)

root [5] ((TTree*) tauMatch->Get("tauMatch_ttree"))->Scan(" tau_flightLength[0]: tau_SV_dist[0]: tau_gen_dR[0]: b_SV(
track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]],  track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]],  track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]],
track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]],
track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]],
track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(),  track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(),
track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(),
track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi()
) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1)", "")

# OS SS1
((TTree*) tauMatch->Get("tauMatch_ttree"))->Scan(" tau_flightLength[0]: tau_SV_dist[0]: tau_gen_dR[0]: b_SV( track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]],  track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]],  track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(),  track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi()) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1)", "")

# OS SS2
((TTree*) tauMatch->Get("tauMatch_ttree"))->Scan(" tau_flightLength[0]: tau_SV_dist[0]: tau_gen_dR[0]: b_SV( track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]],  track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]],  track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(),  track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi()) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1)", "")

# SS1 SS2
((TTree*) tauMatch->Get("tauMatch_ttree"))->Scan(" tau_flightLengthSignificance[0]: tau_flightLength[0]: tau_SV_dist[0]: tau_gen_dR[0]: b_SV( track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi()) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1)", "")

# SVs spatial position
double b_SV_1_dist(
	Float_t b1x, Float_t b1y, Float_t b1z,
	Float_t b2x, Float_t b2y, Float_t b2z,
	Float_t v1eta, Float_t v1phi,
	Float_t v2eta, Float_t v2phi)

# SS1 SS2
((TTree*) tauMatch->Get("tauMatch_ttree"))->Scan(" tau_flightLengthSignificance[0]: tau_flightLength[0]: tau_SV_dist[0]: tau_gen_dR[0]: b_SV_1_dist( track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi()): b_SV_2_dist( track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi()) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1)", "")

((TTree*) tauMatch->Get("tauMatch_ttree"))->Scan(" tau_flightLengthSignificance[0]: tau_flightLength[0]: tau_SV_dist[0]: tau_gen_dR[0]: b_SV_1_dist( track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi())  ", "tau_IDlev[0]>1 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1)", "")
((TTree*) tauMatch->Get("tauMatch_ttree"))->Scan(" tau_flightLengthSignificance[0]: tau_flightLength[0]: tau_SV_dist[0]: tau_gen_dR[0]: b_SV_2_dist( track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi())  ", "tau_IDlev[0]>1 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1)", "")






# all stuff together

# angle sum and all b SV-s
# preparation
((TTree*) tauMatch->Get("tauMatch_ttree"))->Scan(" tau_flightLengthSignificance[0]: tau_flightLength[0]: tau_SV_dist[0]: tau_gen_dR[0]:
b_anglesum(track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]],
track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]],
track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]]):

b_SV( track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]],  track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]],  track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]],
track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]],
track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(),  track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(),
track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi()):

b_SV( track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]],
track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]],
track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(),
track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi()):

b_SV( track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]],
track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]],
track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(),
track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi())
", "tau_IDlev[0]>1 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1)", "")

((TTree*) tauMatch->Get("tauMatch_ttree"))->Scan(" tau_flightLengthSignificance[0]: tau_flightLength[0]: tau_SV_dist[0]: tau_gen_dR[0]: b_anglesum(track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]]): b_SV( track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]],  track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]],  track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(),  track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi()): b_SV( track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi()) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1)", "")

((TTree*) tauMatch->Get("tauMatch_ttree"))->Scan(" b_SV( track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi()) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1)", "")

# and track info
((TTree*) tauMatch->Get("tauMatch_ttree"))->Scan(" tau_flightLengthSignificance[0]: tau_flightLength[0]: tau_SV_dist[0]: tau_gen_dR[0]:
b_anglesum(track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]]):
b_SV( track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]],  track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]],  track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(),  track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi()):
b_SV( track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi()):
b_SV( track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi())
", "tau_IDlev[0]>1 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1)", "")





# simple SV on b info
# FINAL on Friday

# with tau pt
# absolutely different from just directions...
root [72] ((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw("
b_simple_SV_pt(
 track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]],
 track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]],
 track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]],

 track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]],
 track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]],
 track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]],

 track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]],
 track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]],
 track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]],

 track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(),
 track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(),
 track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(),

 track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(),
 track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(),
 track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(),

 track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(),
 track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(),
 track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi() ) >>h(100,-2,2) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "")



# b_simple_SV_pt_direction_penalty

((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw("
b_simple_SV_pt_direction_penalty(
 0,
 track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]],
 track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]],
 track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]],

 track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]],
 track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]],
 track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]],

 track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]],
 track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]],
 track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]],

 track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(),
 track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(),
 track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(),

 track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(),
 track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(),
 track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(),

 track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(),
 track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(),
 track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi() ) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "")

((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" b_simple_SV_pt_direction_penalty( 0, track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi() ) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "")

# REPEAT FRIDAY
((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" b_simple_SV_pt_direction_penalty( 10, track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi() ) >>h(100,-20,5) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "")

# against b discr tau_dR_matched_jet
((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" tau_dR_matched_jet[0] ", "tau_IDlev[0]>1 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "")

((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" jet_b_discr[tau_dR_matched_jet[0]]: b_simple_SV_pt_direction_penalty( 10, track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi() ) >>h(50,-20,5,20,0,1) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 && tau_dR_matched_jet[0] > -1", "")

((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" jet_b_discr[tau_dR_matched_jet[0]]: b_simple_SV_pt_direction_penalty( 10, track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi() ) >>h(50,-20,5,20,0,1) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 && tau_dR_matched_jet[0] > -1", "")

# correlation is there
# cut at 0.9
((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" b_simple_SV_pt_direction_penalty( 10, track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi() ) >>h(100,-20,5) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 && tau_dR_matched_jet[0] > -1 && jet_b_discr[tau_dR_matched_jet[0]] < 0.9 ", "")

((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" b_simple_SV_pt_direction_penalty( 10, track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi() ) >>h(100,-20,5) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 && tau_dR_matched_jet[0] > -1 && jet_b_discr[tau_dR_matched_jet[0]] < 0.9 ", "")

# Medium tau IDlev > 2 and Tight > 3
((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" b_simple_SV_pt_direction_penalty( 10, track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi() ) >>h(100,-20,5) ", "tau_IDlev[0]>3 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 && tau_dR_matched_jet[0] > -1 && jet_b_discr[tau_dR_matched_jet[0]] < 0.9 ", "")






# tests
((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" b_simple_SV_pt_direction_penalty( 4, track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi() ) >> h(100, -5,5) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "")

((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" b_simple_SV_pt_direction_penalty( 3, track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi() ) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "")

((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" b_simple_SV_pt_direction_penalty( 11, track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi() ) >> h(100, 0, 10)", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "")


((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" b_simple_SV_pt_direction_penalty( 18, track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi() ) >> h(100,0,20) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "")

((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" b_simple_SV_pt_direction_penalty( 18, track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi() ) >> h(100,0,20) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "")



# with histo range
((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" b_simple_SV_pt_direction_penalty( 0, track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi() ) >> h(100, -1, 10)", "tau_IDlev[0]>1 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "")

((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" b_simple_SV_pt_direction_penalty( 0, track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi() ) >> h(100, 0, 3)", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "")








# save

root [52] ((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw("b_plane_unitary_volume( track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]]): b_anglesum( track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]] ) >> h(20,0,7, 20,-0.1,0.1)", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "col")


root [52] ((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" b_anglesum( track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]] ) >> h(20,0,7, 20,-0.1,0.1)", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "col")

((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw("track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]] ", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "col")

((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw("track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]] :track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]] >>h(20,-0.005,0.005,20,-0.005,0.005) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "col")
((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw("track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]] :track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]] >>h(20,-0.001,0.001,20,-0.001,0.001) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "col")
# lj
((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw("track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]] :track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]] >>h(20,-0.0005,0.0005,20,-0.0005,0.0005) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "col")
((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw("track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]] :track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]] >>h(20,-0.005,0.005,20,-0.0005,0.0005) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "col")



((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" b_Eta( track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]]) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "col")

# PV and tracking errors
((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" PV_x[0]:PV_z[0]>>h(20,-12,12, 20,0.095,0.115) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "col")
((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" PV_x_err[0]:PV_z_err[0]>>h(20,0,0.005,0,002) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "col")



# check corrected bz approzch
((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" b_cor_angle_trk( track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), tau_p4[0].eta(), tau_p4[0].phi() ) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "col")

# SV out of corrected Z
double corZ_average_SV(
	Float_t b1x, Float_t b1y, Float_t b1z,
	Float_t b2x, Float_t b2y, Float_t b2z,
	Float_t b3x, Float_t b3y, Float_t b3z,
	Float_t v1eta, Float_t v1phi,
	Float_t v2eta, Float_t v2phi,
	Float_t v3eta, Float_t v3phi
	)
        {
	Float_t tracker_error = 0.2; // approximately systematic error on positions

((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw("
corZ_average_SV(
 track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]],
 track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]],
 track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]],

 track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]],
 track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]],
 track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]],

 track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]],
 track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]],
 track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]],

 track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(),
 track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(),
 track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(),

 track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(),
 track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(),
 track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(),

 track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(),
 track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(),
 track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi() ) >>h(100,-2,2) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "")

((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" corZ_average_SV( track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi() ) >>h(100,-15,5) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "")

((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" corZ_average_SV( track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi() ) >>h(100,-15,5) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "")





double b_track_plane_intersections_average(
	Float_t b1x, Float_t b1y, Float_t b1z,
	Float_t b2x, Float_t b2y, Float_t b2z,
	Float_t b3x, Float_t b3y, Float_t b3z,
	Float_t v1pt, Float_t v1eta, Float_t v1phi,
	Float_t v2pt, Float_t v2eta, Float_t v2phi,
	Float_t v3pt, Float_t v3eta, Float_t v3phi,
	Float_t taupt, Float_t taueta, Float_t tauphi
	)

((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" b_track_plane_intersections_average(
 track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]],
 track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]],
 track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]],

 track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]],
 track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]],
 track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]],

 track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]],
 track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]],
 track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]],

 track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(),
 track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(),
 track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(),

 track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(),
 track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(),
 track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(),

 track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(),
 track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(),
 track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi() ) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "")



((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" b_track_plane_intersections_average_perp_angle(1, track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi() ) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "")


# breaking with typos
root [7] ((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" b_track_plane_intersections_average_perp_angle(2, track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi() ) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "")

((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" b_track_plane_intersections_average_perp_angle(3, track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi(), tau_p4[0].pt(), tau_p4[0].eta(), tau_p4[0].phi() ) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "")

((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" b_track_plane_intersections_average_perp_angle(3, track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi(), tau_p4[0].pt(), tau_p4[0].eta(), tau_p4[0].phi() ) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "")


# fixing
((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" b_track_plane_intersections_average_perp_angle(3, track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi() , tau_p4[0].pt(), tau_p4[0].eta(), tau_p4[0].phi() ) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "")



# ok, trying SV out of this

double b_track_plane_intersections_raw_SV(
        int which, //
        Float_t b1x, Float_t b1y, Float_t b1z,
        Float_t b2x, Float_t b2y, Float_t b2z,
        Float_t b3x, Float_t b3y, Float_t b3z,
        Float_t v1pt, Float_t v1eta, Float_t v1phi,
        Float_t v2pt, Float_t v2eta, Float_t v2phi,
        Float_t v3pt, Float_t v3eta, Float_t v3phi,
        Float_t taupt, Float_t taueta, Float_t tauphi
        )

((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" b_track_plane_intersections_raw_SV( track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi(), tau_p4[0].pt(), tau_p4[0].eta(), tau_p4[0].phi() ) >>h(100,-5,5) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "")

# new name:
((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" optimal_directions_intersections_raw_SV( 0, track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi(), tau_p4[0].pt(), tau_p4[0].eta(), tau_p4[0].phi() ) >>h(100,-5,5) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "")






























# TESTING angle-sum in true and fake
# and as a penalty for Sign
# SV loose taus, no cuts, for shape

# a "canv-starter" call
((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw("  lep_p4[0].pt() ", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "")

# angle sum is 5
((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" optimal_directions_intersections_raw_SV( 5, track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi(), tau_p4[0].pt(), tau_p4[0].eta(), tau_p4[0].phi() )  ", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "")

((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" optimal_directions_intersections_raw_SV( 5, track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi(), tau_p4[0].pt(), tau_p4[0].eta(), tau_p4[0].phi() )  ", "tau_IDlev[0]>1 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "")

TH1D* h_ = (TH1D*) ((TTree*) tauMatch->Get("tauMatch_ttree"))->GetHistogram()
TH1D* h_lt = (TH1D*) h_->Clone()
h_lt->SetDirectory(0)
h_lt->SetName("lt")

h_ = (TH1D*) ((TTree*) tauMatch->Get("tauMatch_ttree"))->GetHistogram()
TH1D* h_lj = (TH1D*) h_->Clone()
h_lj->SetDirectory(0)
h_lj->SetName("lt")
h_lj->SetLineColor(kRed)

h_lt->Scale(1/h_lt->Integral())
h_lj->Scale(1/h_lj->Integral())

# SV with anglesum penalty is 49
((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" optimal_directions_intersections_raw_SV( 49, track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi(), tau_p4[0].pt(), tau_p4[0].eta(), tau_p4[0].phi() ) >>h(66,-1,10)", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "")

((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" optimal_directions_intersections_raw_SV( 49, track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi(), tau_p4[0].pt(), tau_p4[0].eta(), tau_p4[0].phi() ) >>h(66,-1,10) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "")


h_ = (TH1D*) ((TTree*) tauMatch->Get("tauMatch_ttree"))->GetHistogram()
TH1D* h_lt_sign = (TH1D*) h_->Clone()
h_lt_sign->SetDirectory(0)
h_lt_sign->SetName("lt_sign")

h_ = (TH1D*) ((TTree*) tauMatch->Get("tauMatch_ttree"))->GetHistogram()
TH1D* h_lj_sign = (TH1D*) h_->Clone()
h_lj_sign->SetDirectory(0)
h_lj_sign->SetName("lt_sign")
h_lj_sign->SetLineColor(kRed)


h_lt_sign->Scale(1/h_lt_sign->Integral())
h_lj_sign->Scale(1/h_lj_sign->Integral())

h_lj_sign->Draw()
h_lt_sign->Draw("same")

# --- looks like the same as without angle
# the angle ~= other penalties, which are already there







# MISMATCH in NTUPLES (FIXED -- had a typo in dR match sigCands - tracks)
# it seems optimal_directions_intersections_raw_SV 29 is used in ntuple
# the tests were done in
# ~/work/private/16/CMSSW_8_0_26_patch1/src/UserCode/ttbar-leptons-80X/outdir/tauMatch-1/merged-sets
# -- it is full TT dataset

# tests
# SV loose taus, no cuts, for shape
((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" optimal_directions_intersections_raw_SV( 29, track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi(), tau_p4[0].pt(), tau_p4[0].eta(), tau_p4[0].phi() ) >>h(100,-1,20) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "")

# len
# reminder: 0th tau has index to refitted tau stuff and to dR jet
((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" optimal_directions_intersections_raw_SV( 39, track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi(), tau_p4[0].pt(), tau_p4[0].eta(), tau_p4[0].phi() ) >>h(100,-1,20) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "")

# sign, len VS b-sicr
# sign VS b
((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" jet_b_discr[tau_dR_matched_jet[0]] : optimal_directions_intersections_raw_SV( 29, track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi(), tau_p4[0].pt(), tau_p4[0].eta(), tau_p4[0].phi() ) >>h(21,-1,20, 20,0,1) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 && tau_dR_matched_jet[0] > -1 ", "col")
# zoom
((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" jet_b_discr[tau_dR_matched_jet[0]] : optimal_directions_intersections_raw_SV( 29, track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi(), tau_p4[0].pt(), tau_p4[0].eta(), tau_p4[0].phi() ) >>h(16,4,20, 20,0,1) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 && tau_dR_matched_jet[0] > -1 ", "col")
# and same for l-jets
# ...

# 3 charged particles in simple_tau_id
((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" jet_b_discr[tau_dR_matched_jet[0]] : optimal_directions_intersections_raw_SV( 29, track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi(), tau_p4[0].pt(), tau_p4[0].eta(), tau_p4[0].phi() ) >>h(21,-1,20, 20,0,1) ", "tau_IDlev[0]>1 && ((abs(gen_t_w_decay_id) == 13 && abs(gen_tb_w_decay_id) >= 15*30 ) || (abs(gen_tb_w_decay_id) == 13 && abs(gen_t_w_decay_id) >= 15*30 )) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 && tau_dR_matched_jet[0] > -1 ", "col")


# len
((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" jet_b_discr[tau_dR_matched_jet[0]] : optimal_directions_intersections_raw_SV( 39, track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi(), tau_p4[0].pt(), tau_p4[0].eta(), tau_p4[0].phi() ) >>h(21,-0.1,1, 20,0,1) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 && tau_dR_matched_jet[0] > -1 ", "col")

# VS energy
((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" tau_p4[0].energy() : optimal_directions_intersections_raw_SV( 29, track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi(), tau_p4[0].pt(), tau_p4[0].eta(), tau_p4[0].phi() ) >>h(21,-1,20, 20,20,150) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 && tau_dR_matched_jet[0] > -1 ", "col")

# more 2 Sign
((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" tau_p4[0].energy() : optimal_directions_intersections_raw_SV( 29, track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi(), tau_p4[0].pt(), tau_p4[0].eta(), tau_p4[0].phi() ) >>h(16,4,20, 20,20,150) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 && tau_dR_matched_jet[0] > -1 ", "col")


# redo cumulative ratios
# real selection, Tight & anti-b-discr, for 3ch true tau and fake taus

((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" optimal_directions_intersections_raw_SV( 29, track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi(), tau_p4[0].pt(), tau_p4[0].eta(), tau_p4[0].phi() ) >>h(100,-1,20) ", "tau_IDlev[0]>3 && ((abs(gen_t_w_decay_id) == 13 && abs(gen_tb_w_decay_id) >= 15*30 ) || (abs(gen_tb_w_decay_id) == 13 && abs(gen_t_w_decay_id) >= 15*30 )) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 && tau_dR_matched_jet[0] > -1 && jet_b_discr[tau_dR_matched_jet[0]] < 0.9 ", "")





# ok, now it segfaults all the time
((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]] ", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "")

# correl with deviation
((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw("optimal_directions_intersections_raw_SV( 17, track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi(), tau_p4[0].pt(), tau_p4[0].eta(), tau_p4[0].phi() ) : optimal_directions_intersections_raw_SV( 27, track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi(), tau_p4[0].pt(), tau_p4[0].eta(), tau_p4[0].phi() ) >>h(20,0,0.01,20,0,0.3) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "col")

# correlate convergence fractoins, SS1 vs OS
((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw("optimal_directions_intersections_raw_SV( 25, track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi(), tau_p4[0].pt(), tau_p4[0].eta(), tau_p4[0].phi() ) : optimal_directions_intersections_raw_SV( 24, track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi(), tau_p4[0].pt(), tau_p4[0].eta(), tau_p4[0].phi() ) >>h(20,0,1.1,20,0,1.1)  ", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "col")


((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" optimal_directions_intersections_raw_SV( 2, track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi(), tau_p4[0].pt(), tau_p4[0].eta(), tau_p4[0].phi() ) >>h(100,0,0.1) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "")

# b cuts
((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" optimal_directions_intersections_raw_SV( 4, track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi(), tau_p4[0].pt(), tau_p4[0].eta(), tau_p4[0].phi() )  ", "tau_IDlev[0]>1 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 && tau_dR_matched_jet[0] > -1 && jet_b_discr[tau_dR_matched_jet[0]] < 0.9 ", "")

((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" optimal_directions_intersections_raw_SV( 29, track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi(), tau_p4[0].pt(), tau_p4[0].eta(), tau_p4[0].phi() ) >>h(100,-1,20)  ", "tau_IDlev[0]>3 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 && tau_dR_matched_jet[0] > -1 && jet_b_discr[tau_dR_matched_jet[0]] < 0.9 ", "")

((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" optimal_directions_intersections_raw_SV( 16, track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi(), tau_p4[0].pt(), tau_p4[0].eta(), tau_p4[0].phi() ) >>h(100,-5,20)  ", "tau_IDlev[0]>1 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "")

((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" max_track_bis_angle( 1, track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi() ) >>h(100,0,0.2) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "")


# XY plane

((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" xy_b_track_pair_bestpoint_tests( 1, track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi()) >> h(100, -1, 1) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "")


# SV test
((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" xy_average_SV( 1, track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi()) >>h(100,-1,1) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "")

((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" abs(tau_p4[0].eta()): xy_average_SV( 0, track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi()) >>h(30,-1,15, 20,0,2.5) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "col")

((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" abs(tau_p4[0].eta()): xy_average_SV( 0, track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi()) >>h(30,-1,15, 20,0,2.5) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "col")

# energy dep for central taus
((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" tau_p4[0].energy(): xy_average_SV( 0, track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi()) >>h(30,-1,15, 30,0,150) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 && abs(tau_p4[0].eta()) < 1.5", "col")

((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" tau_p4[0].energy(): xy_average_SV( 0, track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi()) >>h(30,-1,15, 30,0,150) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 && abs(tau_p4[0].eta()) < 1.5", "col")

((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" tau_p4[0].energy(): xy_average_SV( 0, track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi()) >>h(20,0,5, 20,20,100) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 && abs(tau_p4[0].eta()) < 0.5", "col")


# with tau direction
((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" tau_p4[0].energy(): xy_average_SV( 0, track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi()) >>h(20,-2,5, 20,20,100) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 && abs(tau_p4[0].eta()) < 0.5", "col")

((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" xy_average_SV( 0, track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi()) >>h(100,-10,5) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 && abs(tau_p4[0].eta()) < 0.5", "col")
((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" xy_average_SV( 0, track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi()) >>h(100,-10,5) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 && abs(tau_p4[0].eta()) < 0.5", "col")

((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" xy_average_SV( -1, track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi()) >>h(100,-2,1) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 && abs(tau_p4[0].eta()) < 0.5", "col")

# proj on tau scaled per dev-s
((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" xy_average_SV( -3, track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi()) >>h(100,-5,20) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "col")

((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" xy_average_SV( -3, track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi()) >>h(100,-5,20) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "col")



xy_plane_b_tau_directions
((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" xy_plane_b_tau_directions( 1, track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi())  ", "tau_IDlev[0]>1 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 && abs(tau_p4[0].eta()) < 0.5", "col")


((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" xy_average_SV( -3,
track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]],
track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]],
track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]],

track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi(),
track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(),
track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi()) >>h(100,-20,5) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "col")

((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" xy_b_track_pair_bestpoint_test( 8, track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi()) >>h(100,-10,10) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "")

((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" xy_b_track_pair_bestpoint_test( 1, track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi()) >>h(100,-1,1) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "")
((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" xy_b_track_pair_bestpoint_test( 2, track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi()) >>h(100,-1,1) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "")
((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" xy_b_track_pair_bestpoint_test( 7, track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi()) >>h(100,-1,1) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "")


((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" xy_b_track_pair_bestpoint_test( 10, track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), tau_p4[0].phi()) >>h(100,-0.001,0.001) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "")

# negating b doesn't change its' angle with tau -- HOW COME?
double xy_b_delirium_Phi(
	Float_t b1x, Float_t b1y
	)


((TTree*) tauMatch->Get("tauMatch_ttree"))->Scan(" tau_p4[0].phi(): xy_b_delirium_Phi(track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]]) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "", 20)

double xy_b_delirium_tauPhi(
	Float_t taueta, Float_t tauphi

((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" xy_b_delirium_tauPhi(tau_p4[0].eta(), tau_p4[0].phi())  ", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "")


