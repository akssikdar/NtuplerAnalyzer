# hig comb commands

## NLL scan

combine -M MultiDimFit ttxsec/tt_el_2.txt --algo grid --points 2000 --rMax 2
root -l higgsCombineTest.MultiDimFit.mH120.root
limit->Draw("2*deltaNLL:r", "2*deltaNLL<10", "colz")


## pulls in fit

combine -M FitDiagnostics ttxsec/tt_el_2.txt

(corrected diffNuisances to output only s+b -- option "-o")

python test/diffNuisances.py fitDiagnostics.root -g pulls_of_nuisances.root -o
root -l pulls_of_nuisances.root
gStyle->SetOptStat(0)
nuisancs->Draw()



## post-fit distributions

combine -M MaxLikelihoodFit ttxsec/play_shapes_tt_mu.txt --saveShapes --saveWithUncertainties

-- saves post-fit uncertainty, and then additional stack-plot should put the distr-s together



## covariance matrices

they are done in simple

combine -M FitDiagnostics ttxsec/tt_el_2.txt --plots

-- the png files are saved for fit with b or b+s

more plots with:

combine -M FitDiagnostics ttxsec/tt_mu_2.txt --plots --saveShapes



## datacard to "workspace"

required here and there by stuff

./scripts/text2workspace.py ttxsec/tt_el_2.txt



## toys

combine -M FitDiagnostics ttxsec/tt_el_2.txt --name Data
combine -M FitDiagnostics ttxsec/tt_el_2.txt -t 20000 --toysFrequentist --noErrors --minos none --name Toys --expectSignal 1

-- (without --expectSignal 1 it seems this generates toys with signal = 0)

cd test
root -l
.L plotParametersFromToys.C+

plotParametersFromToys("../fitDiagnosticsToys.root","../fitDiagnosticsData.root", "../tt_el_2.root", "r>0 && r<2")

-- weirdness

  --expectSignal arg (=0)       If set to non-zero, generate *signal* 
                                toys instead of background ones, with 
                                the specified signal strength.




## impacts

../../CombineHarvester/CombineTools/scripts/combineTool.py -M Impacts -d tt_el_2.root -m 125 --robustFit 1 --doInitialFit
../../CombineHarvester/CombineTools/scripts/combineTool.py -M Impacts -d tt_el_2.root -m 125 --robustFit 1 --doFits --parallel 5
../../CombineHarvester/CombineTools/scripts/combineTool.py -M Impacts -d tt_el_2.root -m 125 -o impacts.json
../../CombineHarvester/CombineTools/scripts/plotImpacts.py -i impacts.json -o impacts






# crab submition

for d in `cat dsets_feb_rereco`
python make_crab_cfgs.py $d v13-0 Dilep_tauID

for d in `cat dsets_ext_wjets_dyjets `
python make_crab_cfgs.py $d v13-0 Dilep_tauID

for c in `ls python/crab_cfgs/v13-0/*crab.py`
crab submit -c $c

for c in `cat new_sub`
do
crab submit -c $c
done

for c in `cat dsets_feb_rereco`
do
python make_crab_cfgs.py $c v13-1 Dilep_tauID
done

for c in `ls python/crab_cfgs/v13-1/*crab.py`
crab submit -c $c


## resubmit

--force for resubmit finished jobs

for j in `cat fresh_crabs`
do
crab resubmit --force -d $j
done



## status

for c in `ls crab_projects/crab_Ntupler_v13-0_* -d`
do
  crab status -d $c
done







# track info in TrackMatch TTree

((TTree*) tauMatch->Get("tauMatch_ttree"))->Scan("tau_IDlev[0]:tau_p4[0].E(): tau_flightLength[0]: tau_SV_dist[0]: tau_SV_fit_track_OS_matched_gen_dR[tau_refited_index[0]]:tau_SV_fit_track_SS1_matched_gen_dR[tau_refited_index[0]]:tau_SV_fit_track_SS2_matched_gen_dR[tau_refited_index[0]]: tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]]:tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]]:tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]]: track_b[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]]:track_b[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]]:track_b[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]]: track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta():track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta():track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(): track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi():track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi():track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi(): track_vertex_key[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]]:track_vertex_key[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]]:track_vertex_key[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]]: track_vertex_association[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]]:track_vertex_association[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]]:track_vertex_association[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]] ", "tau_IDlev[0]>1 && gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1", "")

# only track b
((TTree*) tauMatch->Get("tauMatch_ttree"))->Scan("tau_IDlev[0]:tau_p4[0].E(): tau_flightLength[0]: tau_SV_dist[0]: tau_SV_fit_track_OS_matched_gen_dR[tau_refited_index[0]]:tau_SV_fit_track_SS1_matched_gen_dR[tau_refited_index[0]]:tau_SV_fit_track_SS2_matched_gen_dR[tau_refited_index[0]]: tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]]:tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]]:tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]]: track_b[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]]:track_b[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]]:track_b[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]] ", "tau_IDlev[0]>1 && gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1", "")


# sum of b angles check

((TTree*) tauMatch->Get("tauMatch_ttree"))->Scan(" tau_flightLength[0]: tau_SV_dist[0]: tau_SV_fit_track_OS_matched_gen_dR[tau_refited_index[0]]:tau_SV_fit_track_SS1_matched_gen_dR[tau_refited_index[0]]:tau_SV_fit_track_SS2_matched_gen_dR[tau_refited_index[0]]: tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]]:tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]]:tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]]: track_b[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]]:track_b[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]]:track_b[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]]: b_anglesum(track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]]) ", "tau_IDlev[0]>1 && gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1", "")

((TTree*) tauMatch->Get("tauMatch_ttree"))->Scan(" tau_flightLength[0]: tau_SV_dist[0]: tau_gen_dR[0]: b_anglesum(track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]]) ", "tau_IDlev[0]>1 && gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1", "")

((TTree*) tauMatch->Get("tauMatch_ttree"))->Scan(" tau_flightLength[0]: tau_SV_dist[0]: tau_gen_dR[0]: b_anglesum(track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]]) ", "tau_IDlev[0]>1 && gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1", "")

((TTree*) tauMatch->Get("tauMatch_ttree"))->Scan(" tau_flightLength[0]: tau_SV_dist[0]: tau_gen_dR[0]: b_anglesum(track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]]): v_angle( track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(),track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi()): v_angle( track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(),track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi()): v_angle( track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(),track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(),track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi()) ", "tau_IDlev[0]>1 && gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1", "")

# b angles VS track angles
# with ref vtx key

((TTree*) tauMatch->Get("tauMatch_ttree"))->Scan(" tau_flightLength[0]: tau_SV_dist[0]: tau_gen_dR[0]: track_vertex_key[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]]:track_vertex_key[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]]:track_vertex_key[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]]: b_angle(track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]]): b_angle(track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]]): b_angle(track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]]): v_angle( track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(),track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi()): v_angle( track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(),track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi()): v_angle( track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(),track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(),track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi()) ", "tau_IDlev[0]>1 && gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1", "")

# b product track
# is b perpendicular to track?

b_prod_track

((TTree*) tauMatch->Get("tauMatch_ttree"))->Scan(" tau_flightLength[0]: tau_SV_dist[0]: tau_gen_dR[0]: b_angle_track( track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi()) : b_angle_track( track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi()) : b_angle_track( track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi()) ", "tau_IDlev[0]>1 && gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1", "")

# b SV

double b_SV(
	Float_t b1x, Float_t b1y, Float_t b1z,
	Float_t b2x, Float_t b2y, Float_t b2z,
	Float_t v1eta, Float_t v1phi,
	Float_t v2eta, Float_t v2phi
	)

root [5] ((TTree*) tauMatch->Get("tauMatch_ttree"))->Scan(" tau_flightLength[0]: tau_SV_dist[0]: tau_gen_dR[0]: b_SV(
track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]],  track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]],  track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]],
track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]],
track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]],
track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(),  track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(),
track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(),
track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi()
) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1)", "")

# OS SS1
((TTree*) tauMatch->Get("tauMatch_ttree"))->Scan(" tau_flightLength[0]: tau_SV_dist[0]: tau_gen_dR[0]: b_SV( track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]],  track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]],  track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(),  track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi()) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1)", "")

# OS SS2
((TTree*) tauMatch->Get("tauMatch_ttree"))->Scan(" tau_flightLength[0]: tau_SV_dist[0]: tau_gen_dR[0]: b_SV( track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]],  track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]],  track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(),  track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi()) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1)", "")

# SS1 SS2
((TTree*) tauMatch->Get("tauMatch_ttree"))->Scan(" tau_flightLengthSignificance[0]: tau_flightLength[0]: tau_SV_dist[0]: tau_gen_dR[0]: b_SV( track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi()) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1)", "")

# SVs spatial position
double b_SV_1_dist(
	Float_t b1x, Float_t b1y, Float_t b1z,
	Float_t b2x, Float_t b2y, Float_t b2z,
	Float_t v1eta, Float_t v1phi,
	Float_t v2eta, Float_t v2phi)

# SS1 SS2
((TTree*) tauMatch->Get("tauMatch_ttree"))->Scan(" tau_flightLengthSignificance[0]: tau_flightLength[0]: tau_SV_dist[0]: tau_gen_dR[0]: b_SV_1_dist( track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi()): b_SV_2_dist( track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi()) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1)", "")

((TTree*) tauMatch->Get("tauMatch_ttree"))->Scan(" tau_flightLengthSignificance[0]: tau_flightLength[0]: tau_SV_dist[0]: tau_gen_dR[0]: b_SV_1_dist( track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi())  ", "tau_IDlev[0]>1 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1)", "")
((TTree*) tauMatch->Get("tauMatch_ttree"))->Scan(" tau_flightLengthSignificance[0]: tau_flightLength[0]: tau_SV_dist[0]: tau_gen_dR[0]: b_SV_2_dist( track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi())  ", "tau_IDlev[0]>1 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1)", "")






# all stuff together

# angle sum and all b SV-s
# preparation
((TTree*) tauMatch->Get("tauMatch_ttree"))->Scan(" tau_flightLengthSignificance[0]: tau_flightLength[0]: tau_SV_dist[0]: tau_gen_dR[0]:
b_anglesum(track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]],
track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]],
track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]]):

b_SV( track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]],  track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]],  track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]],
track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]],
track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(),  track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(),
track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi()):

b_SV( track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]],
track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]],
track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(),
track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi()):

b_SV( track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]],
track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]],
track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(),
track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi())
", "tau_IDlev[0]>1 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1)", "")

((TTree*) tauMatch->Get("tauMatch_ttree"))->Scan(" tau_flightLengthSignificance[0]: tau_flightLength[0]: tau_SV_dist[0]: tau_gen_dR[0]: b_anglesum(track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]]): b_SV( track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]],  track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]],  track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(),  track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi()): b_SV( track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi()) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1)", "")

((TTree*) tauMatch->Get("tauMatch_ttree"))->Scan(" b_SV( track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi()) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1)", "")

# and track info
((TTree*) tauMatch->Get("tauMatch_ttree"))->Scan(" tau_flightLengthSignificance[0]: tau_flightLength[0]: tau_SV_dist[0]: tau_gen_dR[0]:
b_anglesum(track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]]):
b_SV( track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]],  track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]],  track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(),  track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi()):
b_SV( track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi()):
b_SV( track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi())
", "tau_IDlev[0]>1 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1)", "")





# simple SV on b info
# FINAL on Friday

# with tau pt
# absolutely different from just directions...
root [72] ((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw("
b_simple_SV_pt(
 track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]],
 track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]],
 track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]],

 track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]],
 track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]],
 track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]],

 track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]],
 track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]],
 track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]],

 track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(),
 track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(),
 track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(),

 track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(),
 track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(),
 track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(),

 track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(),
 track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(),
 track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi() ) >>h(100,-2,2) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "")



# b_simple_SV_pt_direction_penalty

((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw("
b_simple_SV_pt_direction_penalty(
 0,
 track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]],
 track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]],
 track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]],

 track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]],
 track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]],
 track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]],

 track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]],
 track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]],
 track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]],

 track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(),
 track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(),
 track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(),

 track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(),
 track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(),
 track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(),

 track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(),
 track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(),
 track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi() ) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "")

((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" b_simple_SV_pt_direction_penalty( 0, track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi() ) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "")

# REPEAT FRIDAY
((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" b_simple_SV_pt_direction_penalty( 10, track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi() ) >>h(100,-20,5) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "")

# against b discr tau_dR_matched_jet
((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" tau_dR_matched_jet[0] ", "tau_IDlev[0]>1 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "")

((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" jet_b_discr[tau_dR_matched_jet[0]]: b_simple_SV_pt_direction_penalty( 10, track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi() ) >>h(50,-20,5,20,0,1) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 && tau_dR_matched_jet[0] > -1", "")

((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" jet_b_discr[tau_dR_matched_jet[0]]: b_simple_SV_pt_direction_penalty( 10, track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi() ) >>h(50,-20,5,20,0,1) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 && tau_dR_matched_jet[0] > -1", "")

# correlation is there
# cut at 0.9
((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" b_simple_SV_pt_direction_penalty( 10, track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi() ) >>h(100,-20,5) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 && tau_dR_matched_jet[0] > -1 && jet_b_discr[tau_dR_matched_jet[0]] < 0.9 ", "")

((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" b_simple_SV_pt_direction_penalty( 10, track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi() ) >>h(100,-20,5) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 && tau_dR_matched_jet[0] > -1 && jet_b_discr[tau_dR_matched_jet[0]] < 0.9 ", "")

# Medium tau IDlev > 2 and Tight > 3
((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" b_simple_SV_pt_direction_penalty( 10, track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi() ) >>h(100,-20,5) ", "tau_IDlev[0]>3 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 && tau_dR_matched_jet[0] > -1 && jet_b_discr[tau_dR_matched_jet[0]] < 0.9 ", "")






# tests
((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" b_simple_SV_pt_direction_penalty( 4, track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi() ) >> h(100, -5,5) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "")

((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" b_simple_SV_pt_direction_penalty( 3, track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi() ) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "")

((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" b_simple_SV_pt_direction_penalty( 11, track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi() ) >> h(100, 0, 10)", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "")


((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" b_simple_SV_pt_direction_penalty( 18, track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi() ) >> h(100,0,20) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "")

((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" b_simple_SV_pt_direction_penalty( 18, track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi() ) >> h(100,0,20) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "")



# with histo range
((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" b_simple_SV_pt_direction_penalty( 0, track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi() ) >> h(100, -1, 10)", "tau_IDlev[0]>1 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "")

((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" b_simple_SV_pt_direction_penalty( 0, track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi() ) >> h(100, 0, 3)", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "")








# save

root [52] ((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw("b_plane_unitary_volume( track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]]): b_anglesum( track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]] ) >> h(20,0,7, 20,-0.1,0.1)", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "col")


root [52] ((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" b_anglesum( track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]] ) >> h(20,0,7, 20,-0.1,0.1)", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "col")

((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw("track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]] ", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "col")

((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw("track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]] :track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]] >>h(20,-0.005,0.005,20,-0.005,0.005) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "col")
((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw("track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]] :track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]] >>h(20,-0.001,0.001,20,-0.001,0.001) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "col")
# lj
((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw("track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]] :track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]] >>h(20,-0.0005,0.0005,20,-0.0005,0.0005) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "col")
((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw("track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]] :track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]] >>h(20,-0.005,0.005,20,-0.0005,0.0005) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "col")



((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" b_Eta( track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]]) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "col")

# PV and tracking errors
((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" PV_x[0]:PV_z[0]>>h(20,-12,12, 20,0.095,0.115) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "col")
((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" PV_x_err[0]:PV_z_err[0]>>h(20,0,0.005,0,002) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "col")



# check corrected bz approzch
((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" b_cor_angle_trk( track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), tau_p4[0].eta(), tau_p4[0].phi() ) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "col")

# SV out of corrected Z
double corZ_average_SV(
	Float_t b1x, Float_t b1y, Float_t b1z,
	Float_t b2x, Float_t b2y, Float_t b2z,
	Float_t b3x, Float_t b3y, Float_t b3z,
	Float_t v1eta, Float_t v1phi,
	Float_t v2eta, Float_t v2phi,
	Float_t v3eta, Float_t v3phi
	)
        {
	Float_t tracker_error = 0.2; // approximately systematic error on positions

((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw("
corZ_average_SV(
 track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]],
 track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]],
 track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]],

 track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]],
 track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]],
 track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]],

 track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]],
 track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]],
 track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]],

 track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(),
 track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(),
 track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(),

 track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(),
 track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(),
 track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(),

 track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(),
 track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(),
 track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi() ) >>h(100,-2,2) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "")

((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" corZ_average_SV( track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi() ) >>h(100,-15,5) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "")

((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" corZ_average_SV( track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi() ) >>h(100,-15,5) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "")





double b_track_plane_intersections_average(
	Float_t b1x, Float_t b1y, Float_t b1z,
	Float_t b2x, Float_t b2y, Float_t b2z,
	Float_t b3x, Float_t b3y, Float_t b3z,
	Float_t v1pt, Float_t v1eta, Float_t v1phi,
	Float_t v2pt, Float_t v2eta, Float_t v2phi,
	Float_t v3pt, Float_t v3eta, Float_t v3phi,
	Float_t taupt, Float_t taueta, Float_t tauphi
	)

((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" b_track_plane_intersections_average(
 track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]],
 track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]],
 track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]],

 track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]],
 track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]],
 track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]],

 track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]],
 track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]],
 track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]],

 track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(),
 track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(),
 track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(),

 track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(),
 track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(),
 track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(),

 track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(),
 track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(),
 track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi() ) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "")



((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" b_track_plane_intersections_average_perp_angle(1, track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi() ) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "")


# breaking with typos
root [7] ((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" b_track_plane_intersections_average_perp_angle(2, track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi() ) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "")

((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" b_track_plane_intersections_average_perp_angle(3, track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi(), tau_p4[0].pt(), tau_p4[0].eta(), tau_p4[0].phi() ) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "")

((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" b_track_plane_intersections_average_perp_angle(3, track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi(), tau_p4[0].pt(), tau_p4[0].eta(), tau_p4[0].phi() ) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "")


# fixing
((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" b_track_plane_intersections_average_perp_angle(3, track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi() , tau_p4[0].pt(), tau_p4[0].eta(), tau_p4[0].phi() ) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "")



# ok, trying SV out of this

double b_track_plane_intersections_raw_SV(
        int which, //
        Float_t b1x, Float_t b1y, Float_t b1z,
        Float_t b2x, Float_t b2y, Float_t b2z,
        Float_t b3x, Float_t b3y, Float_t b3z,
        Float_t v1pt, Float_t v1eta, Float_t v1phi,
        Float_t v2pt, Float_t v2eta, Float_t v2phi,
        Float_t v3pt, Float_t v3eta, Float_t v3phi,
        Float_t taupt, Float_t taueta, Float_t tauphi
        )

((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" b_track_plane_intersections_raw_SV( track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi(), tau_p4[0].pt(), tau_p4[0].eta(), tau_p4[0].phi() ) >>h(100,-5,5) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "")

# new name:
((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" optimal_directions_intersections_raw_SV( 0, track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi(), tau_p4[0].pt(), tau_p4[0].eta(), tau_p4[0].phi() ) >>h(100,-5,5) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "")

# tests
# SV loose taus, no cuts, for shape
((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" optimal_directions_intersections_raw_SV( 29, track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi(), tau_p4[0].pt(), tau_p4[0].eta(), tau_p4[0].phi() ) >>h(100,-1,20) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "")

# correl with deviation
((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw("optimal_directions_intersections_raw_SV( 17, track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi(), tau_p4[0].pt(), tau_p4[0].eta(), tau_p4[0].phi() ) : optimal_directions_intersections_raw_SV( 27, track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi(), tau_p4[0].pt(), tau_p4[0].eta(), tau_p4[0].phi() ) >>h(20,0,0.01,20,0,0.3) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "col")

# correlate convergence fractoins, SS1 vs OS
((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw("optimal_directions_intersections_raw_SV( 25, track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi(), tau_p4[0].pt(), tau_p4[0].eta(), tau_p4[0].phi() ) : optimal_directions_intersections_raw_SV( 24, track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi(), tau_p4[0].pt(), tau_p4[0].eta(), tau_p4[0].phi() ) >>h(20,0,1.1,20,0,1.1)  ", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "col")


((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" optimal_directions_intersections_raw_SV( 2, track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi(), tau_p4[0].pt(), tau_p4[0].eta(), tau_p4[0].phi() ) >>h(100,0,0.1) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "")

# b cuts
((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" optimal_directions_intersections_raw_SV( 4, track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi(), tau_p4[0].pt(), tau_p4[0].eta(), tau_p4[0].phi() )  ", "tau_IDlev[0]>1 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 && tau_dR_matched_jet[0] > -1 && jet_b_discr[tau_dR_matched_jet[0]] < 0.9 ", "")

((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" optimal_directions_intersections_raw_SV( 29, track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi(), tau_p4[0].pt(), tau_p4[0].eta(), tau_p4[0].phi() ) >>h(100,-1,20)  ", "tau_IDlev[0]>3 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 && tau_dR_matched_jet[0] > -1 && jet_b_discr[tau_dR_matched_jet[0]] < 0.9 ", "")

((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" optimal_directions_intersections_raw_SV( 16, track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi(), tau_p4[0].pt(), tau_p4[0].eta(), tau_p4[0].phi() ) >>h(100,-5,20)  ", "tau_IDlev[0]>1 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "")

((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" max_track_bis_angle( 1, track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].pt(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi() ) >>h(100,0,0.2) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "")


# XY plane

((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" xy_b_track_pair_bestpoint_tests( 1, track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi()) >> h(100, -1, 1) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "")


# SV test
((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" xy_average_SV( 1, track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi()) >>h(100,-1,1) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "")

((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" abs(tau_p4[0].eta()): xy_average_SV( 0, track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi()) >>h(30,-1,15, 20,0,2.5) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "col")

((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" abs(tau_p4[0].eta()): xy_average_SV( 0, track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi()) >>h(30,-1,15, 20,0,2.5) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "col")

# energy dep for central taus
((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" tau_p4[0].energy(): xy_average_SV( 0, track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi()) >>h(30,-1,15, 30,0,150) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 && abs(tau_p4[0].eta()) < 1.5", "col")

((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" tau_p4[0].energy(): xy_average_SV( 0, track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi()) >>h(30,-1,15, 30,0,150) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 && abs(tau_p4[0].eta()) < 1.5", "col")

((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" tau_p4[0].energy(): xy_average_SV( 0, track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi()) >>h(20,0,5, 20,20,100) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 && abs(tau_p4[0].eta()) < 0.5", "col")


# with tau direction
((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" tau_p4[0].energy(): xy_average_SV( 0, track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi()) >>h(20,-2,5, 20,20,100) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 && abs(tau_p4[0].eta()) < 0.5", "col")

((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" xy_average_SV( 0, track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi()) >>h(100,-10,5) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 && abs(tau_p4[0].eta()) < 0.5", "col")
((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" xy_average_SV( 0, track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi()) >>h(100,-10,5) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 && abs(tau_p4[0].eta()) < 0.5", "col")

((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" xy_average_SV( -1, track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi()) >>h(100,-2,1) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 && abs(tau_p4[0].eta()) < 0.5", "col")

# proj on tau scaled per dev-s
((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" xy_average_SV( -3, track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi()) >>h(100,-5,20) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "col")

((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" xy_average_SV( -3, track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi()) >>h(100,-5,20) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "col")



xy_plane_b_tau_directions
((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" xy_plane_b_tau_directions( 1, track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi())  ", "tau_IDlev[0]>1 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 && abs(tau_p4[0].eta()) < 0.5", "col")


((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" xy_average_SV( -3,
track_b_x[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]],
track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]],
track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]],

track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS2_matched_track[tau_refited_index[0]]].phi(),
track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(),
track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi()) >>h(100,-20,5) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id == 1 || gen_tb_w_decay_id == 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "col")

((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" xy_b_track_pair_bestpoint_test( 8, track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi()) >>h(100,-10,10) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "")

((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" xy_b_track_pair_bestpoint_test( 1, track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi()) >>h(100,-1,1) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "")
((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" xy_b_track_pair_bestpoint_test( 2, track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi()) >>h(100,-1,1) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "")
((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" xy_b_track_pair_bestpoint_test( 7, track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi()) >>h(100,-1,1) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "")


((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" xy_b_track_pair_bestpoint_test( 10, track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_x[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_b_z[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]], track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]].phi(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].eta(), track_p4[tau_SV_fit_track_OS_matched_track[tau_refited_index[0]]].phi(), tau_p4[0].phi()) >>h(100,-0.001,0.001) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "")

# negating b doesn't change its' angle with tau -- HOW COME?
double xy_b_delirium_Phi(
	Float_t b1x, Float_t b1y
	)


((TTree*) tauMatch->Get("tauMatch_ttree"))->Scan(" tau_p4[0].phi(): xy_b_delirium_Phi(track_b_x[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]], track_b_y[tau_SV_fit_track_SS1_matched_track[tau_refited_index[0]]]) ", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "", 20)

double xy_b_delirium_tauPhi(
	Float_t taueta, Float_t tauphi

((TTree*) tauMatch->Get("tauMatch_ttree"))->Draw(" xy_b_delirium_tauPhi(tau_p4[0].eta(), tau_p4[0].phi())  ", "tau_IDlev[0]>1 && (gen_t_w_decay_id != 1 && gen_tb_w_decay_id != 1) && tau_SV_fit_track_OS_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS1_matched_track_dR[tau_refited_index[0]] + tau_SV_fit_track_SS2_matched_track_dR[tau_refited_index[0]] < 0.002 ", "")


